<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>McMinnville TSP Update — Project Area Map</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@300;400;600;700&display=swap');
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Source Sans 3', 'Segoe UI', sans-serif; background: #1a1a2e; color: #e0e0e0; }
  #map-container { position: relative; width: 100%; height: 100vh; }
  #map { width: 100%; height: 100%; z-index: 1; }

  .map-title-bar {
    position: absolute; top: 0; left: 0; right: 0; z-index: 1000;
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    padding: 12px 24px; display: flex; align-items: center; justify-content: space-between;
    border-bottom: 2px solid #e94560; box-shadow: 0 2px 20px rgba(0,0,0,0.4);
  }
  .map-title-bar h1 { font-size: 18px; font-weight: 700; color: #fff; letter-spacing: 0.5px; }
  .map-title-bar h1 span { color: #e94560; font-weight: 300; }
  .map-title-bar .subtitle { font-size: 12px; color: #8899aa; font-weight: 300; }

  .legend-panel {
    position: absolute; bottom: 30px; left: 16px; z-index: 1000;
    background: rgba(26, 26, 46, 0.94); backdrop-filter: blur(12px);
    border: 1px solid rgba(233, 69, 96, 0.3); border-radius: 8px;
    padding: 16px 20px; min-width: 240px; box-shadow: 0 4px 24px rgba(0,0,0,0.5);
  }
  .legend-panel h3 { font-size: 11px; text-transform: uppercase; letter-spacing: 1.5px; color: #e94560; margin-bottom: 12px; font-weight: 600; }
  .legend-item { display: flex; align-items: center; margin-bottom: 8px; font-size: 13px; color: #ccc; }
  .legend-item .swatch { width: 24px; height: 14px; border-radius: 3px; margin-right: 10px; flex-shrink: 0; }
  .legend-item .swatch-line { width: 24px; height: 3px; border-radius: 2px; margin-right: 10px; flex-shrink: 0; }
  .legend-item .swatch-circle { width: 14px; height: 14px; border-radius: 50%; margin-right: 10px; flex-shrink: 0; border: 2px solid; }

  .info-panel {
    position: absolute; top: 70px; right: 16px; z-index: 1000;
    background: rgba(26, 26, 46, 0.94); backdrop-filter: blur(12px);
    border: 1px solid rgba(233, 69, 96, 0.2); border-radius: 8px;
    padding: 16px 20px; max-width: 340px; box-shadow: 0 4px 24px rgba(0,0,0,0.5);
    display: none;
  }
  .info-panel.active { display: block; }
  .info-panel h3 { font-size: 15px; font-weight: 700; color: #fff; margin-bottom: 6px; }
  .info-panel .info-type { font-size: 10px; text-transform: uppercase; letter-spacing: 1.2px; color: #e94560; margin-bottom: 8px; font-weight: 600; }
  .info-panel p { font-size: 13px; line-height: 1.6; color: #aab; }
  .info-panel .close-btn { position: absolute; top: 8px; right: 12px; background: none; border: none; color: #666; font-size: 18px; cursor: pointer; }
  .info-panel .close-btn:hover { color: #e94560; }

  .layer-toggles {
    position: absolute; top: 70px; left: 16px; z-index: 1000;
    background: rgba(26, 26, 46, 0.94); backdrop-filter: blur(12px);
    border: 1px solid rgba(233, 69, 96, 0.2); border-radius: 8px;
    padding: 12px 16px; box-shadow: 0 4px 24px rgba(0,0,0,0.5);
  }
  .layer-toggles h3 { font-size: 11px; text-transform: uppercase; letter-spacing: 1.5px; color: #e94560; margin-bottom: 10px; font-weight: 600; }
  .toggle-row { display: flex; align-items: center; margin-bottom: 6px; font-size: 13px; color: #ccc; }
  .toggle-row input[type="checkbox"] { margin-right: 8px; accent-color: #e94560; }

  .status-bar {
    position: absolute; bottom: 8px; right: 16px; z-index: 1000;
    font-size: 10px; color: #556; background: rgba(26, 26, 46, 0.8);
    padding: 4px 10px; border-radius: 4px;
  }

  .leaflet-popup-content-wrapper {
    background: rgba(26, 26, 46, 0.96) !important; color: #ddd !important;
    border: 1px solid rgba(233, 69, 96, 0.3) !important; border-radius: 8px !important;
    box-shadow: 0 4px 20px rgba(0,0,0,0.5) !important;
  }
  .leaflet-popup-tip { background: rgba(26, 26, 46, 0.96) !important; }
  .leaflet-popup-content {
    margin: 12px 16px !important; font-family: 'Source Sans 3', sans-serif !important;
    font-size: 13px !important; line-height: 1.5 !important;
  }
  .leaflet-popup-content h4 { color: #e94560; font-size: 14px; margin-bottom: 4px; }
  .leaflet-popup-close-button { color: #888 !important; }
</style>
</head>
<body>
<div id="map-container">
  <div class="map-title-bar">
    <div>
      <h1>McMinnville TSP Update <span>— Project Area Map</span></h1>
      <div class="subtitle">Transportation System Plan Update | City of McMinnville, Oregon</div>
    </div>
    <div style="text-align: right;">
      <div class="subtitle">RFP January 2026 &middot; Due March 5, 2026</div>
      <div class="subtitle" style="color: #e94560;">DRAFT — For Team Review</div>
    </div>
  </div>

  <div class="layer-toggles">
    <h3>Layers</h3>
    <div class="toggle-row"><input type="checkbox" id="tog-ugb" checked> Urban Growth Boundary</div>
    <div class="toggle-row"><input type="checkbox" id="tog-growth" checked> Growth / Planning Areas</div>
    <div class="toggle-row"><input type="checkbox" id="tog-corridors" checked> Key Corridors</div>
    <div class="toggle-row"><input type="checkbox" id="tog-points" checked> Key Locations</div>
    <div class="toggle-row"><input type="checkbox" id="tog-labels" checked> Area Labels</div>
    <div class="toggle-row"><input type="checkbox" id="tog-streets"> Street Map Overlay</div>
  </div>

  <div class="legend-panel">
    <h3>Legend</h3>
    <div class="legend-item"><div class="swatch" style="background: rgba(233,69,96,0.15); border: 2px solid #e94560;"></div>Urban Growth Boundary</div>
    <div class="legend-item"><div class="swatch" style="background: rgba(255,183,77,0.25); border: 1px solid #ffb74d;"></div>Growth / Planning Areas</div>
    <div class="legend-item"><div class="swatch-line" style="background: #ab47bc;"></div>Key Corridors</div>
    <div class="legend-item"><div class="swatch-circle" style="border-color: #66bb6a; background: rgba(102,187,106,0.3);"></div>Key Locations</div>
  </div>

  <div id="info-panel" class="info-panel">
    <button class="close-btn" onclick="document.getElementById('info-panel').classList.remove('active')">&times;</button>
    <div class="info-type" id="info-type"></div>
    <h3 id="info-title"></h3>
    <p id="info-desc"></p>
  </div>

  <div id="map"></div>
  <div class="status-bar">UGB Source: City of McMinnville GIS (ESRI Geodatabase) &middot; Basemap: OpenStreetMap / CARTO</div>
</div>
<script>
// === UGB DATA (947 vertices from City of McMinnville File Geodatabase) ===
const UGB_COORDS = [[45.23409, -123.194641], [45.233902, -123.194531], [45.233803, -123.194515], [45.233687, -123.194509], [45.233618, -123.194475], [45.233537, -123.194448], [45.233469, -123.194409], [45.233422, -123.194384], [45.233347, -123.19438], [45.233299, -123.194436], [45.233245, -123.194525], [45.233148, -123.194643], [45.233061, -123.194767], [45.232978, -123.194904], [45.23293, -123.194978], [45.232917, -123.195024], [45.232946, -123.195096], [45.23302, -123.195219], [45.233089, -123.195316], [45.233168, -123.195463], [45.233257, -123.195653], [45.233272, -123.195767], [45.23329, -123.195869], [45.233357, -123.195989], [45.233384, -123.19608], [45.23342, -123.196204], [45.23346, -123.196384], [45.233498, -123.196557], [45.233522, -123.19665], [45.233545, -123.196788], [45.233553, -123.196938], [45.233545, -123.197107], [45.233517, -123.197169], [45.23273, -123.197307], [45.232122, -123.197305], [45.231808, -123.197186], [45.231023, -123.196457], [45.230966, -123.196583], [45.230966, -123.196664], [45.230973, -123.198832], [45.230979, -123.200898], [45.228554, -123.200909], [45.228543, -123.200927], [45.228475, -123.20097], [45.228385, -123.201001], [45.228322, -123.201021], [45.228276, -123.201054], [45.228249, -123.201119], [45.228225, -123.201226], [45.228228, -123.201296], [45.228288, -123.201342], [45.228401, -123.201394], [45.228507, -123.201442], [45.22866, -123.201534], [45.228785, -123.201606], [45.228923, -123.201737], [45.228983, -123.201868], [45.229014, -123.202013], [45.229, -123.202168], [45.228953, -123.202274], [45.228941, -123.202406], [45.228879, -123.202624], [45.228849, -123.202751], [45.2288, -123.202803], [45.228742, -123.2028], [45.228645, -123.2028], [45.228601, -123.202798], [45.22858, -123.202754], [45.228559, -123.202702], [45.228518, -123.202673], [45.228458, -123.202663], [45.228416, -123.202676], [45.228377, -123.202674], [45.228319, -123.202629], [45.228291, -123.202593], [45.228257, -123.202579], [45.228208, -123.202631], [45.22818, -123.202735], [45.228171, -123.202851], [45.228152, -123.202967], [45.228115, -123.203054], [45.228062, -123.203094], [45.228017, -123.203174], [45.228011, -123.203313], [45.228017, -123.203461], [45.228038, -123.203559], [45.228036, -123.203645], [45.228024, -123.20373], [45.228038, -123.203827], [45.228063, -123.20391], [45.228116, -123.203986], [45.228196, -123.20406], [45.228305, -123.204147], [45.228413, -123.204311], [45.228453, -123.204464], [45.228527, -123.204585], [45.228664, -123.20468], [45.228755, -123.204747], [45.228847, -123.204771], [45.228978, -123.204773], [45.229149, -123.20482], [45.229303, -123.204982], [45.2294, -123.205096], [45.229514, -123.205272], [45.2296, -123.205443], [45.229702, -123.205704], [45.229731, -123.205807], [45.229731, -123.205904], [45.22969, -123.206049], [45.229645, -123.206222], [45.229639, -123.206397], [45.22965, -123.206518], [45.229684, -123.206667], [45.229718, -123.206804], [45.229741, -123.207038], [45.229729, -123.207174], [45.229706, -123.20732], [45.229666, -123.207555], [45.229655, -123.207691], [45.229672, -123.207757], [45.229723, -123.207861], [45.22982, -123.207951], [45.229911, -123.208095], [45.229928, -123.208236], [45.229916, -123.208379], [45.229911, -123.208511], [45.229912, -123.208689], [45.229938, -123.208994], [45.229976, -123.209162], [45.230101, -123.209308], [45.230182, -123.209382], [45.230258, -123.209502], [45.230287, -123.209616], [45.23028, -123.209794], [45.230258, -123.209999], [45.230211, -123.210378], [45.230161, -123.210767], [45.230111, -123.210905], [45.230047, -123.211112], [45.230004, -123.211277], [45.229969, -123.2115], [45.229973, -123.211737], [45.230007, -123.211886], [45.230131, -123.212052], [45.230242, -123.212127], [45.230383, -123.212168], [45.230447, -123.21223], [45.230503, -123.212349], [45.230592, -123.212508], [45.230674, -123.212687], [45.230759, -123.212909], [45.230763, -123.213022], [45.230759, -123.213149], [45.230677, -123.213181], [45.230583, -123.213223], [45.230519, -123.213313], [45.230433, -123.213433], [45.230331, -123.213552], [45.230181, -123.213705], [45.230022, -123.213903], [45.229949, -123.214121], [45.229941, -123.214315], [45.229962, -123.214393], [45.23009, -123.21445], [45.230274, -123.214509], [45.230415, -123.214543], [45.230526, -123.214541], [45.230646, -123.214519], [45.230757, -123.214517], [45.230809, -123.21455], [45.230863, -123.214634], [45.230917, -123.214843], [45.230968, -123.214985], [45.23108, -123.215056], [45.231239, -123.215126], [45.231355, -123.215151], [45.231473, -123.215238], [45.231527, -123.215392], [45.23151, -123.215539], [45.231459, -123.21568], [45.231376, -123.215781], [45.231271, -123.215842], [45.231255, -123.215946], [45.231271, -123.216025], [45.2313, -123.216077], [45.231359, -123.216114], [45.231425, -123.216218], [45.231479, -123.216372], [45.231534, -123.216492], [45.231604, -123.216569], [45.231659, -123.216641], [45.231734, -123.216742], [45.231817, -123.216824], [45.231913, -123.216902], [45.23198, -123.216901], [45.23208, -123.216856], [45.232193, -123.216752], [45.232239, -123.216657], [45.232268, -123.216558], [45.23236, -123.216465], [45.232481, -123.21635], [45.232619, -123.216233], [45.232723, -123.216195], [45.23282, -123.216215], [45.232844, -123.216371], [45.232798, -123.216482], [45.232702, -123.216637], [45.232652, -123.216786], [45.23266, -123.21693], [45.232718, -123.217092], [45.232806, -123.217228], [45.232852, -123.2173], [45.232948, -123.217375], [45.233065, -123.217454], [45.233131, -123.217605], [45.233133, -123.21771], [45.233094, -123.217925], [45.233133, -123.218063], [45.233193, -123.218291], [45.233219, -123.21846], [45.233199, -123.218657], [45.233186, -123.218889], [45.233232, -123.219039], [45.233304, -123.219136], [45.233337, -123.219285], [45.233324, -123.219463], [45.233258, -123.219576], [45.233178, -123.219716], [45.233078, -123.219948], [45.233012, -123.220108], [45.233005, -123.22024], [45.233045, -123.220448], [45.233051, -123.220623], [45.233004, -123.220791], [45.232925, -123.220877], [45.232799, -123.221065], [45.2327, -123.221169], [45.232633, -123.22129], [45.23256, -123.221392], [45.23256, -123.221524], [45.232546, -123.221721], [45.232507, -123.221844], [45.232473, -123.22204], [45.232414, -123.22215], [45.232361, -123.222143], [45.232288, -123.222124], [45.232222, -123.222106], [45.232149, -123.222087], [45.232056, -123.222113], [45.231963, -123.222159], [45.231884, -123.222226], [45.231844, -123.222329], [45.23185, -123.222449], [45.23187, -123.222582], [45.231903, -123.222693], [45.231969, -123.222882], [45.231982, -123.223003], [45.231969, -123.223135], [45.231883, -123.223173], [45.231783, -123.223192], [45.231671, -123.223229], [45.231572, -123.223248], [45.231485, -123.223387], [45.231472, -123.223491], [45.231432, -123.223575], [45.231432, -123.223695], [45.231478, -123.223771], [45.231564, -123.223904], [45.231637, -123.224016], [45.231696, -123.224155], [45.231729, -123.224316], [45.231735, -123.224494], [45.231696, -123.224551], [45.231576, -123.224549], [45.231471, -123.224532], [45.231331, -123.224522], [45.231248, -123.224537], [45.231172, -123.224596], [45.231114, -123.224671], [45.231071, -123.224789], [45.231043, -123.224893], [45.231043, -123.224997], [45.231078, -123.225123], [45.231138, -123.225282], [45.231198, -123.225428], [45.231266, -123.225591], [45.231361, -123.225766], [45.231399, -123.22583], [45.231413, -123.225932], [45.231386, -123.226035], [45.231328, -123.226133], [45.231255, -123.226157], [45.231194, -123.226263], [45.231178, -123.226441], [45.231175, -123.226654], [45.231185, -123.226787], [45.231194, -123.226857], [45.231169, -123.226942], [45.231125, -123.227071], [45.231095, -123.227233], [45.231081, -123.227388], [45.231087, -123.227532], [45.231107, -123.227581], [45.227669, -123.227576], [45.227044, -123.227638], [45.225431, -123.227642], [45.219832, -123.227639], [45.221983, -123.233772], [45.222953, -123.236502], [45.220589, -123.236832], [45.219338, -123.237008], [45.219515, -123.238322], [45.220077, -123.238321], [45.220178, -123.247168], [45.218833, -123.247166], [45.217881, -123.248079], [45.217209, -123.248086], [45.217045, -123.248058], [45.217068, -123.246774], [45.217073, -123.246714], [45.217082, -123.246623], [45.217097, -123.246511], [45.217143, -123.246207], [45.217156, -123.246059], [45.217161, -123.24587], [45.21714, -123.242875], [45.215098, -123.242876], [45.215103, -123.246955], [45.213239, -123.246959], [45.213242, -123.254154], [45.208057, -123.254223], [45.204908, -123.254264], [45.202629, -123.254295], [45.199803, -123.254268], [45.199685, -123.239866], [45.199604, -123.239863], [45.199603, -123.2402], [45.193852, -123.2402], [45.193851, -123.240518], [45.192509, -123.240516], [45.192531, -123.240125], [45.192489, -123.239298], [45.192471, -123.237777], [45.192487, -123.235953], [45.192511, -123.234631], [45.192475, -123.234359], [45.19237, -123.233916], [45.192198, -123.233543], [45.191818, -123.23327], [45.191589, -123.233149], [45.191438, -123.232996], [45.191131, -123.232325], [45.190898, -123.231706], [45.190642, -123.230971], [45.190595, -123.230738], [45.189827, -123.226108], [45.189512, -123.225236], [45.189467, -123.223887], [45.18946, -123.223528], [45.18755, -123.225829], [45.187571, -123.225853], [45.180231, -123.234649], [45.180226, -123.232336], [45.187384, -123.221424], [45.190415, -123.2168], [45.190183, -123.215781], [45.190216, -123.215617], [45.190242, -123.215439], [45.190252, -123.21532], [45.190273, -123.215064], [45.190302, -123.214798], [45.190319, -123.21457], [45.190345, -123.214183], [45.190579, -123.210185], [45.191077, -123.210185], [45.191129, -123.209881], [45.19114, -123.208977], [45.190992, -123.207829], [45.190881, -123.20697], [45.190842, -123.205994], [45.190979, -123.203675], [45.191074, -123.20252], [45.191159, -123.201068], [45.191918, -123.20058], [45.192914, -123.199901], [45.192913, -123.199645], [45.192719, -123.199783], [45.191988, -123.200277], [45.191522, -123.200593], [45.191175, -123.200805], [45.191192, -123.200517], [45.19124, -123.199771], [45.191271, -123.199422], [45.191304, -123.199041], [45.191352, -123.198568], [45.191419, -123.198074], [45.191497, -123.197603], [45.191518, -123.197494], [45.191548, -123.197333], [45.191589, -123.197165], [45.191633, -123.196988], [45.19168, -123.196809], [45.191719, -123.196667], [45.191771, -123.196487], [45.191838, -123.19627], [45.191887, -123.196115], [45.191944, -123.195947], [45.192018, -123.195738], [45.192079, -123.195576], [45.192129, -123.195447], [45.192197, -123.195279], [45.192261, -123.195122], [45.192332, -123.19496], [45.192414, -123.194786], [45.192578, -123.19444], [45.192694, -123.194205], [45.192943, -123.19422], [45.192941, -123.193743], [45.193066, -123.193507], [45.192895, -123.192735], [45.19289, -123.191439], [45.19291, -123.19144], [45.192885, -123.186114], [45.192731, -123.185938], [45.19248, -123.185299], [45.192484, -123.185241], [45.192803, -123.185084], [45.192799, -123.183882], [45.192976, -123.184182], [45.1931, -123.184368], [45.193237, -123.184502], [45.193367, -123.18459], [45.193479, -123.184674], [45.193579, -123.18475], [45.193678, -123.184788], [45.193788, -123.18479], [45.194011, -123.184299], [45.194238, -123.183872], [45.194306, -123.183484], [45.194388, -123.183214], [45.194472, -123.182979], [45.194568, -123.182797], [45.194585, -123.182776], [45.194741, -123.182578], [45.19488, -123.182452], [45.194997, -123.18241], [45.195172, -123.18252], [45.195304, -123.18273], [45.195514, -123.183159], [45.195568, -123.183327], [45.195574, -123.183494], [45.195672, -123.184024], [45.195696, -123.184304], [45.195748, -123.1845], [45.195773, -123.184714], [45.195808, -123.18485], [45.195854, -123.185084], [45.1959, -123.185271], [45.195963, -123.18548], [45.196037, -123.185676], [45.196093, -123.185851], [45.196127, -123.185985], [45.196205, -123.186076], [45.196265, -123.186115], [45.196381, -123.186297], [45.196822, -123.186528], [45.19805, -123.184249], [45.198101, -123.184282], [45.198403, -123.183722], [45.199242, -123.182164], [45.199873, -123.180992], [45.20024, -123.180311], [45.200319, -123.180179], [45.201475, -123.178102], [45.201533, -123.177983], [45.201489, -123.177869], [45.201464, -123.177802], [45.201432, -123.177707], [45.201404, -123.17762], [45.201377, -123.177526], [45.201347, -123.177403], [45.201324, -123.177295], [45.201299, -123.177172], [45.201277, -123.177037], [45.201261, -123.176924], [45.20124, -123.176746], [45.201222, -123.176526], [45.201208, -123.176236], [45.2012, -123.175807], [45.201198, -123.175423], [45.201197, -123.174972], [45.201152, -123.174977], [45.201144, -123.172357], [45.197579, -123.172364], [45.19734, -123.172361], [45.197326, -123.169791], [45.197679, -123.169792], [45.197688, -123.164294], [45.194674, -123.164325], [45.194701, -123.158883], [45.193852, -123.15889], [45.194331, -123.156997], [45.193097, -123.156986], [45.192439, -123.157002], [45.192336, -123.156602], [45.192169, -123.156198], [45.191991, -123.155945], [45.191715, -123.155692], [45.19138, -123.155486], [45.191005, -123.155387], [45.190601, -123.155427], [45.189851, -123.155609], [45.189713, -123.155471], [45.189693, -123.155066], [45.189743, -123.154296], [45.189694, -123.153556], [45.189596, -123.152927], [45.189478, -123.152553], [45.189251, -123.152403], [45.18885, -123.152411], [45.18848, -123.152541], [45.188148, -123.152716], [45.187809, -123.152739], [45.18754, -123.15254], [45.187525, -123.152154], [45.18734, -123.151122], [45.187355, -123.150525], [45.18751, -123.15011], [45.188881, -123.148807], [45.18942, -123.148134], [45.185678, -123.131622], [45.186408, -123.131291], [45.197335, -123.129624], [45.19925, -123.129259], [45.202212, -123.129228], [45.203832, -123.129163], [45.205448, -123.129148], [45.205911, -123.129053], [45.205945, -123.131372], [45.206002, -123.13528], [45.206033, -123.137452], [45.206042, -123.138075], [45.20615, -123.14545], [45.205599, -123.145464], [45.205596, -123.145968], [45.206158, -123.145958], [45.20623, -123.150902], [45.203142, -123.150935], [45.20313, -123.145686], [45.201451, -123.145737], [45.201472, -123.152722], [45.202585, -123.152727], [45.203002, -123.153996], [45.203618, -123.15401], [45.203619, -123.155027], [45.204339, -123.15593], [45.204355, -123.155962], [45.204631, -123.156529], [45.204862, -123.157006], [45.20534, -123.157428], [45.205613, -123.15757], [45.205563, -123.157856], [45.205461, -123.158259], [45.205328, -123.158577], [45.20535, -123.15902], [45.205367, -123.159378], [45.205389, -123.159822], [45.205413, -123.16032], [45.205347, -123.160682], [45.205436, -123.160996], [45.205552, -123.161336], [45.205712, -123.161498], [45.205935, -123.161711], [45.205955, -123.161929], [45.205957, -123.162845], [45.205965, -123.166545], [45.205386, -123.16653], [45.205383, -123.166639], [45.205392, -123.169555], [45.205395, -123.170585], [45.205376, -123.17073], [45.205869, -123.1712], [45.206482, -123.171539], [45.208218, -123.172765], [45.209221, -123.173686], [45.209698, -123.173708], [45.210185, -123.173552], [45.210456, -123.173049], [45.210596, -123.172633], [45.210646, -123.172516], [45.210703, -123.172324], [45.210945, -123.171914], [45.211023, -123.171851], [45.211134, -123.171805], [45.211235, -123.171799], [45.211293, -123.171822], [45.211379, -123.171892], [45.211431, -123.171969], [45.21164, -123.172271], [45.211668, -123.172456], [45.211686, -123.17273], [45.2117, -123.172949], [45.211761, -123.173354], [45.211871, -123.173485], [45.21199, -123.173562], [45.212159, -123.173621], [45.212305, -123.173636], [45.212411, -123.173621], [45.212516, -123.173578], [45.212662, -123.17353], [45.212758, -123.173427], [45.212952, -123.173367], [45.213042, -123.173219], [45.213168, -123.173137], [45.213296, -123.173044], [45.213361, -123.172868], [45.213434, -123.17276], [45.213504, -123.17263], [45.213613, -123.172349], [45.213756, -123.171975], [45.213874, -123.171844], [45.214113, -123.171352], [45.214179, -123.171184], [45.214185, -123.17117], [45.214288, -123.170868], [45.214467, -123.170542], [45.214503, -123.17047], [45.214882, -123.169851], [45.215135, -123.169362], [45.215373, -123.168818], [45.215599, -123.168219], [45.21572, -123.16756], [45.215746, -123.166999], [45.215664, -123.166234], [45.215668, -123.165356], [45.215602, -123.164829], [45.215532, -123.164566], [45.215424, -123.164149], [45.214214, -123.161135], [45.213147, -123.15978], [45.212585, -123.159528], [45.212285, -123.159514], [45.212224, -123.159236], [45.212202, -123.158571], [45.212167, -123.157602], [45.212085, -123.157617], [45.211826, -123.157686], [45.211856, -123.157667], [45.211873, -123.157647], [45.211884, -123.157626], [45.211893, -123.157601], [45.211897, -123.157574], [45.211901, -123.157446], [45.211904, -123.157336], [45.211911, -123.157149], [45.211921, -123.156934], [45.211944, -123.156602], [45.211967, -123.15639], [45.212027, -123.155884], [45.212073, -123.155547], [45.212171, -123.154997], [45.212308, -123.154383], [45.212462, -123.153817], [45.212654, -123.153222], [45.212863, -123.152667], [45.213056, -123.152228], [45.21322, -123.151872], [45.213393, -123.151537], [45.213576, -123.151215], [45.213744, -123.150951], [45.213864, -123.150751], [45.214028, -123.15051], [45.214296, -123.150147], [45.214585, -123.149798], [45.214858, -123.149504], [45.215204, -123.149159], [45.215456, -123.148933], [45.215775, -123.14868], [45.215931, -123.148568], [45.216142, -123.148426], [45.216355, -123.148292], [45.216614, -123.148145], [45.216629, -123.148131], [45.216776, -123.148058], [45.216807, -123.148042], [45.216825, -123.148038], [45.216896, -123.148005], [45.216989, -123.147962], [45.217128, -123.147902], [45.217281, -123.147841], [45.217392, -123.1478], [45.217488, -123.147766], [45.217636, -123.147718], [45.217907, -123.147646], [45.218376, -123.147545], [45.218772, -123.147496], [45.2189, -123.147487], [45.219147, -123.147478], [45.219399, -123.147483], [45.21981, -123.147505], [45.21981, -123.147722], [45.219804, -123.152844], [45.220863, -123.152847], [45.220911, -123.159334], [45.220922, -123.160755], [45.226342, -123.160779], [45.226355, -123.160475], [45.22638, -123.159941], [45.226411, -123.159261], [45.226421, -123.159045], [45.226434, -123.158804], [45.226444, -123.158681], [45.226471, -123.158448], [45.226484, -123.15833], [45.226328, -123.158234], [45.226106, -123.158255], [45.224333, -123.158282], [45.224252, -123.148169], [45.224249, -123.147803], [45.22438, -123.147612], [45.224429, -123.147525], [45.224434, -123.147406], [45.22455, -123.147145], [45.224564, -123.147066], [45.224665, -123.146736], [45.224722, -123.14652], [45.224961, -123.145917], [45.225049, -123.145758], [45.225138, -123.145542], [45.225547, -123.144776], [45.225584, -123.144763], [45.225656, -123.144873], [45.226034, -123.145023], [45.226131, -123.145039], [45.226323, -123.145157], [45.226492, -123.145301], [45.226546, -123.145374], [45.226743, -123.145486], [45.226839, -123.145545], [45.226972, -123.145584], [45.227071, -123.14565], [45.227445, -123.145895], [45.227623, -123.146028], [45.227901, -123.146197], [45.228093, -123.146307], [45.228478, -123.146553], [45.228792, -123.146959], [45.229218, -123.1473], [45.229303, -123.147398], [45.229377, -123.147519], [45.229434, -123.147648], [45.229461, -123.147716], [45.229479, -123.147792], [45.229554, -123.147998], [45.229618, -123.148154], [45.229651, -123.148312], [45.229677, -123.148531], [45.229672, -123.148589], [45.229663, -123.148834], [45.229658, -123.148893], [45.229646, -123.149009], [45.229585, -123.14925], [45.229579, -123.149364], [45.229564, -123.149536], [45.229542, -123.149742], [45.229525, -123.14991], [45.229492, -123.150086], [45.229503, -123.150296], [45.229504, -123.15041], [45.229535, -123.150507], [45.229593, -123.150587], [45.229633, -123.15078], [45.229644, -123.150947], [45.229779, -123.151063], [45.229996, -123.151117], [45.230277, -123.151063], [45.230628, -123.151063], [45.23082, -123.151065], [45.231126, -123.151125], [45.231433, -123.151349], [45.231686, -123.151524], [45.231853, -123.151769], [45.231957, -123.151968], [45.231966, -123.152178], [45.231878, -123.152442], [45.231703, -123.152663], [45.231563, -123.152824], [45.23137, -123.153106], [45.231346, -123.153561], [45.231386, -123.153699], [45.23158, -123.153935], [45.231765, -123.15403], [45.231909, -123.154312], [45.232057, -123.154563], [45.23222, -123.155077], [45.232156, -123.156218], [45.232015, -123.156849], [45.231825, -123.157368], [45.231599, -123.157773], [45.231001, -123.158884], [45.230769, -123.159218], [45.230668, -123.159396], [45.230542, -123.159724], [45.230506, -123.159987], [45.230554, -123.160214], [45.230763, -123.160302], [45.231002, -123.16053], [45.231277, -123.160749], [45.231558, -123.161011], [45.231737, -123.161155], [45.231854, -123.161277], [45.232269, -123.161553], [45.232615, -123.16165], [45.233061, -123.161652], [45.233356, -123.161537], [45.233762, -123.161366], [45.234219, -123.161236], [45.234686, -123.161265], [45.235143, -123.16138], [45.235528, -123.161483], [45.235945, -123.161557], [45.23631, -123.161698], [45.236513, -123.161886], [45.236696, -123.162046], [45.236746, -123.16236], [45.236665, -123.162748], [45.236499, -123.163525], [45.236431, -123.163821], [45.236388, -123.164203], [45.236354, -123.164649], [45.23632, -123.165055], [45.236236, -123.165292], [45.236092, -123.165339], [45.235847, -123.165351], [45.235678, -123.165378], [45.2354, -123.16547], [45.235139, -123.165622], [45.234891, -123.165804], [45.2348, -123.165939], [45.234842, -123.166178], [45.235019, -123.166357], [45.235171, -123.16657], [45.235432, -123.166777], [45.23572, -123.167074], [45.235964, -123.167256], [45.236192, -123.16748], [45.236395, -123.167816], [45.236572, -123.168034], [45.236774, -123.168284], [45.237045, -123.168522], [45.237306, -123.168752], [45.2375, -123.169002], [45.237652, -123.169168], [45.23772, -123.169373], [45.237745, -123.169709], [45.237685, -123.170032], [45.237576, -123.170066], [45.237424, -123.170032], [45.23728, -123.169889], [45.237162, -123.169709], [45.236951, -123.169574], [45.236786, -123.169584], [45.236555, -123.169672], [45.236334, -123.169825], [45.236106, -123.16997], [45.23603, -123.170246], [45.236055, -123.170566], [45.236106, -123.170972], [45.236164, -123.171286], [45.236113, -123.171726], [45.236113, -123.172099], [45.236189, -123.172421], [45.236298, -123.172733], [45.2365, -123.173045], [45.236643, -123.173227], [45.236745, -123.17336], [45.236918, -123.173605], [45.237053, -123.173833], [45.237122, -123.174007], [45.237202, -123.174177], [45.237276, -123.174329], [45.237385, -123.174559], [45.237506, -123.174736], [45.237672, -123.175066], [45.237704, -123.182059], [45.237782, -123.190439], [45.23779, -123.191288], [45.237795, -123.191801], [45.237796, -123.191844], [45.237734, -123.19194], [45.237563, -123.192206], [45.237444, -123.192454], [45.237366, -123.19269], [45.237364, -123.192812], [45.237385, -123.192928], [45.23747, -123.193175], [45.23763, -123.193345], [45.238031, -123.193537], [45.238108, -123.193499], [45.238141, -123.193426], [45.2383, -123.193358], [45.238411, -123.193348], [45.23856, -123.193358], [45.238713, -123.193361], [45.23886, -123.193277], [45.239009, -123.193265], [45.239122, -123.193295], [45.239196, -123.193382], [45.239295, -123.19356], [45.239253, -123.193712], [45.239174, -123.193855], [45.238886, -123.194282], [45.238798, -123.194366], [45.238751, -123.194437], [45.238671, -123.194524], [45.238556, -123.194616], [45.238451, -123.194756], [45.238138, -123.195349], [45.238033, -123.195481], [45.237865, -123.195639], [45.237726, -123.19564], [45.237632, -123.195515], [45.237626, -123.195238], [45.237583, -123.195017], [45.237535, -123.19487], [45.237448, -123.194777], [45.23731, -123.194797], [45.236979, -123.194905], [45.236846, -123.194871], [45.236722, -123.194403], [45.236651, -123.194035], [45.236563, -123.193829], [45.236457, -123.193718], [45.236351, -123.19371], [45.236226, -123.193774], [45.236066, -123.194229], [45.235837, -123.194477], [45.235631, -123.194628], [45.23553, -123.194763], [45.235374, -123.194849], [45.235179, -123.194657], [45.234989, -123.194592], [45.234809, -123.194653], [45.234656, -123.194834], [45.234532, -123.194825], [45.234262, -123.194684], [45.23409, -123.194641]];

// === MAP INIT ===
const map = L.map('map', { center: [45.2098, -123.1917], zoom: 13, zoomControl: false });
L.control.zoom({ position: 'bottomright' }).addTo(map);
L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}{r}.png', {
  attribution: '&copy; OpenStreetMap &copy; CARTO', maxZoom: 19
}).addTo(map);

// Street labels overlay (toggleable)
var streetLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_only_labels/{z}/{x}/{y}{r}.png', {
  maxZoom: 19, pane: 'overlayPane'
}).addTo(map);

// OSM streets overlay — semi-transparent street network
var osmStreets = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  maxZoom: 19, opacity: 0.3, attribution: '&copy; OpenStreetMap'
});

// === LAYER GROUPS ===
const ugbLayer = L.layerGroup().addTo(map);
const growthLayer = L.layerGroup().addTo(map);
const corridorLayer = L.layerGroup().addTo(map);
const pointsLayer = L.layerGroup().addTo(map);
const labelsLayer = L.layerGroup().addTo(map);

// === UGB POLYGON ===
const ugbPoly = L.polygon(UGB_COORDS, {
  color: '#e94560', weight: 3, opacity: 0.9,
  fillColor: '#e94560', fillOpacity: 0.06
}).addTo(ugbLayer);
ugbPoly.bindPopup('<h4>Urban Growth Boundary</h4>Source: City of McMinnville GIS (File Geodatabase)<br>Acknowledged April 2021<br>~662 gross buildable acres of housing and employment land');
map.fitBounds(ugbPoly.getBounds(), { padding: [60, 60] });

// === INFO PANEL ===
function showInfo(title, type, desc) {
  document.getElementById('info-type').textContent = type;
  document.getElementById('info-title').textContent = title;
  document.getElementById('info-desc').textContent = desc;
  document.getElementById('info-panel').classList.add('active');
}

// === GROWTH AREAS ===
const growthAreas = [
  {
    name: 'Southwest Area',
    type: 'Growth Area (~660 acres)',
    desc: 'Approximately 660 acres within the southwest UGB. TSP will incorporate future transportation networks to support annexation and development.',
    coords: [[45.1870,-123.2320],[45.1875,-123.2200],[45.1850,-123.2100],[45.1830,-123.2000],[45.1820,-123.1900],[45.1810,-123.1830],[45.1850,-123.1820],[45.1890,-123.1850],[45.1920,-123.1920],[45.1920,-123.2050],[45.1910,-123.2180],[45.1900,-123.2280],[45.1870,-123.2320]],
    color: '#ffb74d'
  },
  {
    name: 'Fox Ridge Road Area',
    type: 'Growth Area (~230 acres)',
    desc: 'Approximately 230 acres with planned land uses and infrastructure. Ordinance No. 5412 (2024).',
    coords: [[45.1930,-123.1580],[45.1960,-123.1500],[45.1940,-123.1420],[45.1900,-123.1400],[45.1870,-123.1450],[45.1880,-123.1540],[45.1930,-123.1580]],
    color: '#ff8a65'
  },
  {
    name: 'Three Mile Lane Corridor',
    type: 'Planning Area (Hwy 18)',
    desc: 'Higher-density development along Highway 18. Ordinance No. 5126 (2022). Maintaining highway mobility while improving local connectivity.',
    coords: [[45.2050,-123.1620],[45.2090,-123.1520],[45.2130,-123.1420],[45.2170,-123.1320],[45.2200,-123.1250],[45.2170,-123.1200],[45.2130,-123.1260],[45.2090,-123.1370],[45.2050,-123.1480],[45.2020,-123.1580],[45.2050,-123.1620]],
    color: '#fff176'
  },
  {
    name: 'McMinnville Landing',
    type: 'Mixed-Use Employment (~200 acres)',
    desc: '200-acre mixed-use employment area near Hwy 18 and airport. Ordinance No. 5158 (2026).',
    coords: [[45.2160,-123.1380],[45.2190,-123.1310],[45.2220,-123.1250],[45.2250,-123.1220],[45.2230,-123.1170],[45.2190,-123.1200],[45.2160,-123.1280],[45.2145,-123.1350],[45.2160,-123.1380]],
    color: '#80deea'
  },
  {
    name: 'Downtown Core',
    type: 'Revitalization Area',
    desc: 'Historic downtown and NE Gateway. Third Street Improvement Project (Phase D, 30% design). Commerce, tourism, livability.',
    coords: [[45.2080,-123.2020],[45.2130,-123.2020],[45.2145,-123.1960],[45.2140,-123.1880],[45.2100,-123.1870],[45.2075,-123.1930],[45.2080,-123.2020]],
    color: '#ce93d8'
  }
];

growthAreas.forEach(function(area) {
  var poly = L.polygon(area.coords, {
    color: area.color, weight: 2, opacity: 0.85,
    fillColor: area.color, fillOpacity: 0.2
  }).addTo(growthLayer);
  poly.on('click', function() { showInfo(area.name, area.type, area.desc); });

  var center = poly.getBounds().getCenter();
  L.marker(center, {
    icon: L.divIcon({
      className: 'area-label-icon',
      html: '<div style="color:#fff;font-size:11px;font-weight:600;text-shadow:0 0 6px rgba(0,0,0,0.9),0 0 12px rgba(0,0,0,0.7);white-space:nowrap;text-align:center;pointer-events:none;">' + area.name + '</div>',
      iconSize: [0, 0], iconAnchor: [0, 0]
    })
  }).addTo(labelsLayer);
});

// === KEY CORRIDORS ===
var corridors = [
  {
    name: 'Highway 18 / Three Mile Lane',
    desc: 'Major state highway. TSP will refine improvements supporting higher-density development per Three Mile Lane Area Plan.',
    coords: [[45.1960,-123.2120],[45.2000,-123.2000],[45.2050,-123.1850],[45.2100,-123.1700],[45.2130,-123.1580],[45.2160,-123.1440],[45.2190,-123.1320],[45.2210,-123.1220]],
    color: '#ab47bc', weight: 4
  },
  {
    name: 'OR 99W Corridor',
    desc: 'Active Transportation Plan adopted 2022. Key north-south corridor with bicycle and pedestrian improvements.',
    coords: [[45.2400,-123.1950],[45.2300,-123.1960],[45.2200,-123.1965],[45.2100,-123.1975],[45.2000,-123.1985],[45.1930,-123.1995],[45.1870,-123.2005]],
    color: '#7e57c2', weight: 3
  },
  {
    name: 'Third Street (Downtown)',
    desc: 'Multi-block downtown revitalization. Phase D (30% design). TSP integrates planned improvements.',
    coords: [[45.2090,-123.1990],[45.2100,-123.1960],[45.2115,-123.1920],[45.2125,-123.1890]],
    color: '#f48fb1', weight: 4, dashArray: '10, 5'
  },
  {
    name: 'East-side Freight Route',
    desc: 'TSP will identify freight routes supporting east-side industrial area. Employment and goods movement.',
    coords: [[45.2280,-123.1550],[45.2220,-123.1500],[45.2160,-123.1470],[45.2100,-123.1450],[45.2040,-123.1460]],
    color: '#ffab40', weight: 3, dashArray: '5, 8'
  }
];

corridors.forEach(function(c) {
  var line = L.polyline(c.coords, {
    color: c.color, weight: c.weight || 3, opacity: 0.85, dashArray: c.dashArray || null
  }).addTo(corridorLayer);
  line.on('click', function() { showInfo(c.name, 'Key Corridor', c.desc); });
  line.bindTooltip(c.name, { permanent: false, direction: 'center' });
});

// === KEY LOCATIONS ===
var locations = [
  { name: 'McMinnville Municipal Airport', type: 'Infrastructure', desc: 'Adjacent to Innovation Campus.', lat: 45.2194, lng: -123.1359, icon: String.fromCodePoint(9992) },
  { name: 'Downtown McMinnville', type: 'Activity Center', desc: 'Historic downtown core. Third Street project underway.', lat: 45.2103, lng: -123.1955, icon: String.fromCodePoint(127963) },
  { name: 'East-side Industrial Park', type: 'Employment Center', desc: 'Major employment area. Freight route improvements needed.', lat: 45.2150, lng: -123.1470, icon: String.fromCodePoint(127981) },
  { name: 'Linfield University', type: 'Institution', desc: 'Generates significant ped/bike/transit demand.', lat: 45.2030, lng: -123.1920, icon: String.fromCodePoint(127891) },
  { name: 'Hwy 18 / 99W Interchange', type: 'IAMP (2002)', desc: 'Critical state highway junction.', lat: 45.1965, lng: -123.2100, icon: String.fromCodePoint(128256) },
  { name: 'Transit Hub Area', type: 'Transit', desc: 'Yamhill County Transit Plan (2018) and McMinnville Transit Plan (2021).', lat: 45.2100, lng: -123.1900, icon: String.fromCodePoint(128652) }
];

locations.forEach(function(loc) {
  var marker = L.circleMarker([loc.lat, loc.lng], {
    radius: 8, fillColor: '#66bb6a', color: '#66bb6a',
    weight: 2, opacity: 0.9, fillOpacity: 0.3
  }).addTo(pointsLayer);
  marker.bindPopup('<h4>' + loc.icon + ' ' + loc.name + '</h4><em>' + loc.type + '</em><br>' + loc.desc);
  marker.bindTooltip(loc.name, { permanent: false, direction: 'top', offset: [0, -10] });
});

// === LAYER TOGGLES ===
document.getElementById('tog-ugb').addEventListener('change', function() { this.checked ? map.addLayer(ugbLayer) : map.removeLayer(ugbLayer); });
document.getElementById('tog-growth').addEventListener('change', function() { this.checked ? map.addLayer(growthLayer) : map.removeLayer(growthLayer); });
document.getElementById('tog-corridors').addEventListener('change', function() { this.checked ? map.addLayer(corridorLayer) : map.removeLayer(corridorLayer); });
document.getElementById('tog-points').addEventListener('change', function() { this.checked ? map.addLayer(pointsLayer) : map.removeLayer(pointsLayer); });
document.getElementById('tog-labels').addEventListener('change', function() { this.checked ? map.addLayer(labelsLayer) : map.removeLayer(labelsLayer); });
document.getElementById('tog-streets').addEventListener('change', function() { this.checked ? map.addLayer(osmStreets) : map.removeLayer(osmStreets); });
</script>
</body>
</html>